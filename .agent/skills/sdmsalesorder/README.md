# SDM 銷售訂單系統 - 文件說明

## 文件概述

本目錄包含 SDM 銷售訂單系統的完整系統分析與設計文件。這些文件是基於對現有程式碼的深入分析而產生，旨在幫助開發人員、維護人員和專案管理者全面了解系統架構、設計理念和實作細節。

---

## 文件列表

### 1. 系統分析與設計文件.md

**適用對象**: 專案經理、系統分析師、架構師、開發人員

**主要內容**:
- **系統概述**: 系統目的、主要功能、目標用戶
- **系統架構**: 整體架構圖、分層設計、架構模式
- **技術堆疊**: 後端技術、前端技術、工具與插件
- **功能模組分析**:
  - 會員管理模組
  - 產品管理模組
  - 購物車管理模組
  - 訂單管理模組
  - 公告管理模組
- **資料模型設計**: 核心實體類別、ER圖
- **API接口設計**: RESTful API設計、統一響應格式
- **安全性設計**: 認證授權、密碼安全、防護機制
- **部署架構**: 部署環境、配置說明
- **系統流程圖**: 業務流程、購物車到訂單流程

**特色**:
- 包含大量 Mermaid 圖表，視覺化呈現系統架構
- 詳細的業務流程說明
- 完整的技術選型分析

---

### 2. 技術文件-類別與方法說明.md

**適用對象**: 開發人員、維護人員

**主要內容**:
- **Controller層**:
  - CustomerController (會員控制器)
  - ProductController (產品控制器)
  - OrderController (訂單控制器)
- **Service層**:
  - SdmSoFuncWService (核心業務服務)
  - SdmSoMemberService (會員服務)
  - SdmSoShoppingCartService (購物車服務)
  - SdmSoOrderHeadService (訂單服務)
- **Repository層**: 資料存取介面
- **Entity層**: 實體類別定義
- **Utility層**: 工具類別
- **Filter層**: 請求過濾器
- **Configuration層**: 配置類別

**特色**:
- 每個類別都有詳細的職責說明
- 每個方法都有完整的參數說明和返回值格式
- 包含實際的程式碼範例
- 詳細的業務流程說明

**使用建議**:
- 開發新功能時，參考相關Controller和Service的實作方式
- 維護現有功能時，快速查找對應的方法說明
- 進行程式碼審查時，對照文件檢查實作是否符合設計

---

### 3. 資料庫設計文件.md

**適用對象**: 資料庫管理員、開發人員

**主要內容**:
- **資料庫概述**: 連接資訊、Schema結構、命名規範
- **資料表設計**:
  - 會員相關表 (SDM_SO_MEMBER)
  - 購物車相關表 (SDM_SO_SHOPPING_CART)
  - 訂單相關表 (SDM_SO_ORDER_HEAD, SDM_SO_ORDER_DETAIL)
  - 公告相關表 (SDM_SHIP_ANNOUNCE)
- **索引設計**: 主鍵索引、外鍵索引、複合索引
- **存儲過程**:
  - 會員相關 (LOGIN_CHECK, UPDATE_PASSWORD)
  - 購物車相關 (ADD_TO_CART, GET_CART_SUMMARY)
  - 訂單相關 (CREATE_ORDER, CANCEL_ORDER)
- **視圖設計**: CMM_CUSTOMER_V, V_ORDER_SUMMARY
- **觸發器**: 自動計算金額、更新總計
- **資料字典**: 狀態代碼、序列定義

**特色**:
- 完整的DDL語句
- 詳細的欄位說明
- 索引策略說明
- 存儲過程完整程式碼

**使用建議**:
- 資料庫初始化時，參考DDL語句建立表結構
- 開發新功能時，參考現有存儲過程的寫法
- 效能優化時，檢查索引設計是否合理

---

## 文件使用指南

### 新進開發人員

**建議閱讀順序**:
1. 先閱讀「系統分析與設計文件.md」了解系統整體架構
2. 再閱讀「技術文件-類別與方法說明.md」了解程式碼結構
3. 最後閱讀「資料庫設計文件.md」了解資料模型

**學習重點**:
- 理解系統的分層架構 (MVC模式)
- 熟悉主要的業務流程 (登入、購物、下單)
- 了解資料表之間的關聯關係

---

### 功能開發

**開發新功能時**:
1. 在「系統分析與設計文件.md」中查看類似功能的設計
2. 在「技術文件-類別與方法說明.md」中參考相關Controller和Service的實作
3. 在「資料庫設計文件.md」中設計所需的資料表和存儲過程

**範例 - 開發「我的最愛」功能**:
1. 參考「購物車管理模組」的設計理念
2. 參考 `OrderController` 和 `SdmSoShoppingCartService` 的實作方式
3. 設計 `SDM_SO_FAVORITE` 表，參考 `SDM_SO_SHOPPING_CART` 的結構
4. 實作 `ADD_TO_FAVORITE` 存儲過程，參考 `ADD_TO_CART` 的邏輯

---

### 問題排查

**遇到問題時**:
1. 先在「技術文件-類別與方法說明.md」中找到對應的方法
2. 查看方法的參數說明和返回值格式
3. 檢查「資料庫設計文件.md」中相關表的約束和觸發器
4. 參考「系統分析與設計文件.md」中的流程圖，確認業務邏輯

**範例 - 購物車數量更新失敗**:
1. 查看 `OrderController.updtShoppinCart()` 方法
2. 檢查參數是否正確傳遞
3. 查看 `SDM_SO_SHOPPING_CART` 表的約束
4. 檢查是否有觸發器影響更新操作

---

### 系統維護

**日常維護**:
- 定期檢查「資料庫設計文件.md」中的索引是否需要重建
- 參考「系統分析與設計文件.md」中的安全性設計，確保系統安全
- 根據「技術文件-類別與方法說明.md」進行程式碼審查

**效能優化**:
1. 查看「資料庫設計文件.md」中的索引設計
2. 檢查常用查詢是否有對應的索引
3. 參考「技術文件-類別與方法說明.md」優化Service層的邏輯

---

## 文件維護

### 更新原則

**何時更新文件**:
- 新增功能模組時
- 修改資料表結構時
- 調整系統架構時
- 重要的業務流程變更時

**更新內容**:
- 在對應的文件中新增或修改相關章節
- 更新相關的流程圖和架構圖
- 更新版本歷史記錄

---

### 文件格式

所有文件使用 **Markdown** 格式編寫，包含以下特色:

1. **Mermaid圖表**:
   - 架構圖 (graph)
   - 流程圖 (flowchart)
   - 序列圖 (sequenceDiagram)
   - 狀態圖 (stateDiagram)
   - 思維導圖 (mindmap)
   - ER圖 (erDiagram)
   - 類別圖 (classDiagram)

2. **程式碼區塊**:
   - 支援語法高亮
   - 包含 Java, SQL, Properties 等語言

3. **表格**:
   - 清晰的欄位說明
   - API參數說明
   - 狀態代碼對照

---

## 工具推薦

### 文件閱讀工具

1. **Visual Studio Code**
   - 安裝 Markdown Preview Enhanced 插件
   - 支援 Mermaid 圖表即時預覽

2. **Typora**
   - 所見即所得的 Markdown 編輯器
   - 原生支援 Mermaid 圖表

3. **GitHub / GitLab**
   - 線上瀏覽，自動渲染 Mermaid 圖表
   - 支援文件版本控制

---

### 圖表編輯工具

1. **Mermaid Live Editor** (https://mermaid.live/)
   - 線上編輯 Mermaid 圖表
   - 即時預覽和匯出

2. **Draw.io**
   - 繪製複雜的架構圖
   - 匯出為 PNG/SVG 嵌入文件

---

## 常見問題

### Q1: 如何快速找到某個功能的實作位置?

**A**:
1. 先在「系統分析與設計文件.md」的功能模組分析中找到對應模組
2. 查看該模組的核心類別
3. 在「技術文件-類別與方法說明.md」中找到對應的Controller和Service
4. 根據類別路徑在程式碼中找到實際檔案

**範例**: 要找「加入購物車」功能
- 模組: 購物車管理模組
- Controller: `OrderController.postAddPartToCart()`
- Service: `SdmSoFuncWService.addToCart()`
- 檔案路徑: `src/main/java/com/sdm/controller/OrderController.java`

---

### Q2: 如何理解某個存儲過程的作用?

**A**:
1. 在「資料庫設計文件.md」的存儲過程章節中找到該存儲過程
2. 查看參數說明和程式碼
3. 在「技術文件-類別與方法說明.md」中找到調用該存儲過程的Service方法
4. 結合業務流程理解其作用

---

### Q3: 如何設計新的資料表?

**A**:
1. 參考「資料庫設計文件.md」中現有表的設計
2. 遵循命名規範
3. 設計主鍵、外鍵和索引
4. 考慮是否需要觸發器
5. 更新文件，記錄新表的設計

---

### Q4: 系統使用了哪些設計模式?

**A**:
根據「系統分析與設計文件.md」，系統主要使用:
- **MVC模式**: 分離視圖、控制和模型
- **Repository模式**: 資料存取層抽象
- **Service層模式**: 業務邏輯封裝
- **Filter模式**: 請求過濾和攔截

---

## 版本歷史

| 版本 | 日期 | 作者 | 變更說明 |
|------|------|------|----------|
| 1.0 | 2026-01-26 | System Analysis | 初始版本，包含三份核心文件 |

---

## 聯絡資訊

如有文件相關問題或建議，請聯絡:
- **專案負責人**: [待填寫]
- **技術負責人**: [待填寫]
- **文件維護**: [待填寫]

---

## 附錄

### 相關資源

- **Spring Boot官方文件**: https://spring.io/projects/spring-boot
- **Oracle Database文件**: https://docs.oracle.com/en/database/
- **Mermaid文件**: https://mermaid-js.github.io/

### 專案相關文件

- **需求規格書**: [待補充]
- **測試計畫**: [待補充]
- **部署手冊**: [待補充]
- **使用者手冊**: [待補充]

---

**文件結束**

感謝您閱讀本文件！希望這些文件能幫助您更好地理解和維護 SDM 銷售訂單系統。
